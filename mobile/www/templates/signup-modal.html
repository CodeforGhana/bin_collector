<ion-modal-view class="login-page">
    <ion-header-bar class="item item-icon-left bar-bin">
        <i class="icon ion-android-arrow-back" ng-click="loginCtrl.closeModal()"></i>&nbsp;
        <span>{{loginCtrl.isLoginModal ? 'Login With Your Phone Number' : 'Create an Account'}}</span>
    </ion-header-bar>
    <ion-content class="padding">
        <form name="signupForm" novalidate="" ng-submit="loginCtrl.submit(signupForm)">
            <ion-list class="list-inset">
                <ion-item class="item-input"
                          ng-class="{'has-error': (signupForm.phone.$dirty || loginCtrl.isSubmit) && signupForm.phone.$invalid}">
                    <input type="tel" name="phone" ng-model="loginCtrl.user.phoneNumber" placeholder="Your phone number"
                           required ng-pattern="/(024|054|026|027|020|050|023)[0-9]{7}/">
                </ion-item>
                <div class="form-errors" ng-messages="signupForm.phone.$error"
                     ng-messages-include="templates/form_errors.html"
                     ng-show="loginCtrl.isSubmit || signupForm.phone.$dirty">
                    <div class="form-error" ng-message="pattern">A valid phone number is required!</div>
                </div>
                <ion-item class="item-input"
                          ng-class="{'has-error': signupForm.pin.$invalid && (loginCtrl.isSubmit || signupForm.pin.$dirty)}">
                    <input type="password" name="pin" ng-model="loginCtrl.user.pin" placeholder="Your secret pin"
                           required minlength="6">
                </ion-item>
                <div class="form-errors" ng-messages="signupForm.pin.$error"
                     ng-messages-include="templates/form_errors.html"
                     ng-show="loginCtrl.isSubmit || signupForm.pin.$dirty">
                    <div class="form-error" ng-message="minlength">Secret pin must be at least 6 characters long!</div>
                </div>
                <button class="button button-block button-log-in" ng-disabled="loginCtrl.isCreatingAccount">
                    <span ng-hide="loginCtrl.isSubmitting">
                        {{loginCtrl.isLoginModal ? 'Log In' : 'Create Account'}}
                    </span>
                    <span ng-show="loginCtrl.isSubmitting">Processing...</span>
                </button>
            </ion-list>
        </form>
    </ion-content>
</ion-modal-view>